선형 회귀 통계: R-Squared, F 검정, t 검정


오차제곱을 최소화하는 방법을 통해 데이터에 적합한 선형 모델을 가지게 되었다고 했을 때, 몇 가지 질문이 남는다.

* 회귀가 눈짐작이 아닌 실제 통계적인 관점에서도 실질적으로 데어터에 얼마나 적합한가?
* 이러한 전체적인 적합이 우연에 의한 것인가 아니면 통계적으로 유의한가?
* 변수들 중에서 모델에 영향력이 큰 것은 어떤 것인가?

이런 질문들에 답하기 위해서는 R-Squared, F 검정, 개별계수에 대한 t 검정이 필요하다.


### R-Squared : 적합도 측정

#### 기본 컨셉
만약 어떠한 고객의 훈련 데이터 셋도 없는 상태에서 고객의 임신 여부를 예측하라고 한다면, 오차제곱을 최소화하는 가장 좋은 방법은 어느 경우에나 임신(1)과 비임신(0)은 각각 50%의 확률을 갖는다고 보면 예측값을 0.5라고 하는 것이 그나마 오차(실제값-예측값)을 최소화하는 방법이라고 볼 수 있다. 이것을 오차제곱의 합의 최대치라고 생각할 수 있다. 이것을 통계적으로는 총 제곱합이라고 한다.

오차제곱의 합의 최대치와 예측 모델의 오차제곱의 합을 통해서 적합도를 측정하겠다는 것이 R-Squred의 기본 컨셉이다.

예측 모델의 오차제곱의 합은 회귀를 가지고 데이터를 맞추어(fit) 보고 난 이후에도 설명되지 않는 부분을 뜻한다. 이런 맥락에서 오차제곱의 합은 종종 잔차제곱합이라고도 한다.

#### 결론
이 회귀 모델은 어느 정도 데이터에 적합한가? 즉 그 적합도(goodnedd of fit)는 얼마인가? 일반적으로 이 값은 총 제곱합에 대한 설명되는 제곱합의 비로 표현된다.

만약 모델이 정확하게 데이터에 적합하다면 오차제곱의 합은 0이 될 것이기 때문에, R-Squared는 1이 된다. 반대로 모델이 데이터와 전혀 맞지 않는다면, R-Squared 값은 0이 될 것이다.

#### 주의사항
R-Squared 계산은 데이터 값의 선형 관계를 찾을 때만 사용된다. 따라서 모델의 독립 변수와 종속 변수 사이에 V자 혹은 U자 모양의 비선형 관계가 형성되는 경우에는 R-Squared 값이 그 관계를 제대로 표현하지 못하며, 모델의 적합도를 나타낼 수 없다.

R-Squared 값은 오로지 모델이 데이터에 얼마나 적합한지만을 말해 준다. 통계적으로 유의한지 여부는 말해주지 않는다.


### F 검정 : 통계적으로 유의한가?

#### F 검정이 필요한 이유
어떤 모델은 데이터에는 적합하지만, 그 적합도가 통계적으로 유의하지 않을 수 있다. 희박자료(sparse dataset: 관찰값이 개수가 작은 경우)에서는 이런 경우가 흔하다.

어떤 모델이 통계적으로 유의하다고 말하기 위해서는 우연에 의한 효과라는 가설을 부정할 수 있어야 한다. 그래서 일단은 모델이 적합함이 완전히 우연에 의한 효과라고 가정하고, 그 가설을 부정하는 방식으로 통걔적 유의성을 검증한다.


#### F 검정은 어떻게 하나?
귀무가설이 참이라고 가정(모델이 적합함이 완전히 우연에 의한 효과라고 가정)하고, 관찰된 적합도를 얻을 확률이 5퍼센트보다 작으면 귀무가설을 기각할 수 있다. 이 관촬된 적합도를 얻을 확률을 p값(p-value)라고 부른다. 그 확률을 계산하기 위해 F 검정을 실행하는 것이다.

F 검정은 모델에 대한 세 가지 정보를 가지고, F 분포를 통해서 확인하다. 필요한 세 가지 정보란 다음과 같다.

* 모델의 계수
* 자유도 : 전체 훈련 데이터 셋의 개수에서 모델 계수의 숫자를 뺀 값
* F 통계량 : F 통계량은 설명되지 않는 오차제곱의 합에 대한 설명되는 오차제곱의 합의 비에 독립 변수들에 대한 자유도의 비를 곱한 값이다.

F 통계량이 커지면 커질수록 귀무가설에 대한 확률은 낮아진다.


### 계수의 t 검정 : 어떤 변수들이 통계적으로 유의한가?
#### 계수의 t 검정이 필요한 이유
F 검정은 전체 회귀 모델이 통계적으로 유의한지를 따지는 것이다. 이것은 개별적인 변수들의 통계적 유의성을 담보하지는 못한다.

개별적인 변수들의 통계적 유의성 검정을 통해서, 무엇이 모델의 결과에 영향을 주는 것인지에 대한 인사이트를 얻을 수 있다. 통계적으로 유의하지 않는 변수들은 모델에서 제거할 수도 있다. 

만약 통계적으로 유의하지 않은 변수가 중요하다고 느껴지면, 훈련용 데이터 셋에서 데이터가 제대로 클린하게 들어갔는지 확인하는 것도 하나의 방법이다.






Tags:
  검정, 예측, 회귀